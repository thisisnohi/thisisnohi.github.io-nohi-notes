(window.webpackJsonp=window.webpackJsonp||[]).push([[71],{287:function(n,t,a){"use strict";a.r(t);var i=a(5),e=Object(i.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var n=this,t=n.$createElement,a=n._self._c||t;return a("div",{staticClass:"content"},[a("h1",{attrs:{id:"nginx-安装windows服务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nginx-安装windows服务","aria-hidden":"true"}},[n._v("#")]),n._v(" nginx 安装windows服务")]),n._v(" "),a("p",[n._v("以windows服务方式启动nginx")]),n._v(" "),a("div",{staticClass:"danger custom-block"},[a("p",{staticClass:"custom-block-title"},[n._v("坑")]),n._v(" "),a("p",[n._v("以服务方式启动，不支持restart，重启服务会生成两条exe在进程列表中")])]),n._v(" "),a("h2",{attrs:{id:"步骤"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#步骤","aria-hidden":"true"}},[n._v("#")]),n._v(" 步骤")]),n._v(" "),a("ul",[a("li",[n._v("下载winsw")])]),n._v(" "),a("div",{staticClass:"danger custom-block"},[a("p",{staticClass:"custom-block-title"},[n._v("坑")]),n._v(" "),a("p",[n._v("此处有个坑.之前下载个版本不成功，1.9版本，重新安装，启动OK。参见： https://www.cnblogs.com/liqiao/p/4627528.html")])]),n._v(" "),a("ul",[a("li",[a("p",[n._v("winsw-1.9-bin.exe 放到nginx解压目录，修改名称为 nginx-service.exe")])]),n._v(" "),a("li",[a("p",[n._v("新建nginx-service.xml，内容如下")])])]),n._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('<?xml version="1.0" encoding="UTF-8" ?>\n<service>\n\t<id>nginx</id>\n\t<name>nginx</name>\n\t<description>nginx server</description>\t\n\t<logpath>D:/A_ENV/nginx-1.14.0/server-logs/</logpath>\n\t<logmode>roll</logmode>\n\t<depend></depend>\n\t<executable>D:/A_ENV/nginx-1.14.0/nginx.exe</executable>\n\t<startargument>-p D:/A_ENV/nginx-1.14.0</startargument>\n\t<stopexecutable>E:/server/nginx/nginx.exe</stopexecutable>\n\t<stopargument>-p D:/A_ENV/nginx-1.14.0 -s stop</stopargument>\n</service>\n')])])]),a("ul",[a("li",[a("p",[n._v("管理员cmd运行")]),n._v(" "),a("ul",[a("li",[n._v("安装:nginx-service.exe install")]),n._v(" "),a("li",[n._v("卸载:nginx-service.exe uninstall")]),n._v(" "),a("li",[n._v('查看进程：tasklist /fi "imagename eq nginx.exe"')]),n._v(" "),a("li",[n._v("查看端口: netstat -aon | findstr :80")])])]),n._v(" "),a("li",[a("p",[n._v("nginx命令")]),n._v(" "),a("ul",[a("li",[n._v("nginx -h  查看help")]),n._v(" "),a("li",[n._v("nginx -v  查看版本")]),n._v(" "),a("li",[n._v("nginx -V  查看Nginx的版本和安装时config的参数。")]),n._v(" "),a("li",[n._v("nginx -t  测试Nginx的配置")]),n._v(" "),a("li",[n._v("nginx -T  测试Nginx的配置，并打印配置")]),n._v(" "),a("li",[n._v("start nginx")]),n._v(" "),a("li",[n._v("nginx -s  给Nginx发送指令\n"),a("ul",[a("li",[n._v("nginx -s reload    在不重新启动nginx的情况下重新加载配置文件")]),n._v(" "),a("li",[n._v("nginx -s reopen    重启nginx")]),n._v(" "),a("li",[n._v("nginx -s stop      停止nginx")]),n._v(" "),a("li",[n._v("nginx -s quit      停止nginx")])])])])])]),n._v(" "),a("h2",{attrs:{id:"配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置","aria-hidden":"true"}},[n._v("#")]),n._v(" 配置")]),n._v(" "),a("blockquote",[a("p",[n._v("参考：https://www.cnblogs.com/xiaoliangup/p/9175932.html")])]),n._v(" "),a("p",[a("strong",[n._v("location区段")])]),n._v(" "),a("p",[n._v("通过指定模式来与客户端请求的URI相匹配，基本语法如下："),a("strong",[n._v("location [=|~|~*|^~|@] pattern{……}")])]),n._v(" "),a("p",[n._v("1、没有修饰符 表示：必须以指定模式开始，如：")]),n._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("server {\n　　server_name baidu.com;\n　　location /abc {\n　　　　……\n　　}\n}\n那么，如下是对的：http://baidu.com/abchttp://baidu.com/abc?p1http://baidu.com/abc/http://baidu.com/abcde\n")])])]),a("p",[n._v("2、=表示：必须与指定的模式精确匹配")]),n._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("server {\nserver_name sish\n　　location = /abc {\n　　　　……\n　　}\n}\n那么，如下是对的：\nhttp://baidu.com/abc\nhttp://baidu.com/abc?p1\n如下是错的：\nhttp://baidu.com/abc/\nhttp://baidu.com/abcde\n")])])]),a("p",[n._v("3、~ 表示：指定的正则表达式要区分大小写")]),n._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("server {\nserver_name baidu.com;\n　　location ~ ^/abc$ {\n　　　　……\n　　}\n}\n那么，如下是对的：\nhttp://baidu.com/abc\nhttp://baidu.com/abc?p1=11&p2=22\n如下是错的：\nhttp://baidu.com/ABC\nhttp://baidu.com/abc/\nhttp://baidu.com/abcde\n")])])]),a("p",[n._v("4、~* 表示：指定的正则表达式不区分大小写")]),n._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("server {\nserver_name baidu.com;\nlocation ~* ^/abc$ {\n　　　　……\n　　}\n}\n那么，如下是对的：\nhttp://baidu.com/abc\nhttp://baidu..com/ABC\nhttp://baidu..com/abc?p1=11&p2=22\n如下是错的：\nhttp://baidu..com/abc/\nhttp://baidu..com/abcde\n")])])]),a("p",[n._v("5、^~ 类似于无修饰符的行为，也是以指定模式开始，不同的是，如果模式匹配，\n那么就停止搜索其他模式了。\n6、@ ：定义命名location区段，这些区段客户段不能访问，只可以由内部产生的请\n求来访问，如try_files或error_page等")]),n._v(" "),a("p",[a("strong",[n._v("查找顺序和优先级\n1：带有“=“的精确匹配优先\n2：没有修饰符的精确匹配\n3：正则表达式按照他们在配置文件中定义的顺序\n4：带有“^~”修饰符的，开头匹配\n5：带有“~” 或“~*” 修饰符的，如果正则表达式与URI匹配\n6：没有修饰符的，如果指定字符串与URI开头匹配")])]),n._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("Location区段匹配示例location = / {\n　　# 只匹配 / 的查询.\n　　[ configuration A ]\n}\nlocation / {\n　　# 匹配任何以 / 开始的查询，但是正则表达式与一些较长的字符串将被首先匹配。\n　　[ configuration B ]\n}\nlocation ^~ /images/ {\n　　# 匹配任何以 /images/ 开始的查询并且停止搜索，不检查正则表达式。\n　　[ configuration C ]\n}\nlocation ~* \\.(gif|jpg|jpeg)$ {\n　　# 匹配任何以gif, jpg, or jpeg结尾的文件，但是所有 /images/ 目录的请求将在Configuration C中处\n　　理。\n　　[ configuration D ]\n} 各\n请求的处理如下例：\n■/ → configuration A\n■/documents/document.html → configuration B\n■/images/1.gif → configuration C\n■/documents/1.jpg → configuration D\n")])])]),a("p",[a("strong",[n._v("root 、alias指令区别")])]),n._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("location /img/ {\n    alias /var/www/image/;\n}\n#若按照上述配置的话，则访问/img/目录里面的文件时，ningx会自动去/var/www/image/目录找文件\nlocation /img/ {\n    root /var/www/image;\n}\n#若按照这种配置的话，则访问/img/目录下的文件时，nginx会去/var/www/image/img/目录下找文件。] \n")])])]),a("p",[n._v("alias是一个目录别名的定义，root则是最上层目录的定义。")]),n._v(" "),a("p",[n._v("还有一个重要的区别是alias后面必须要用“/”结束，否则会找不到文件的。。。而root则可有可无~~")])])}],!1,null,null,null);t.default=e.exports}}]);